
# 技術要件
- pytest: テスト支援ツール


# プラグイン
- hypothesis: プロパティベースのテスト。テストパラメータを自動生成し、より広範囲にテストすることができる。後述の問題のため、使用を控えている。
- pytest-xdist: テストを並列実行し、テストの速度を高める。並列実行のため、データベースの削除などより気を払う必要がある。
- pytest-cov: テスト網羅率を計測するツール。

# 注意
テストをする上で次のような既知の問題があります。

## pytest-covを利用したテストでデバッグができない
- 参考：　<https://github.com/microsoft/vscode-python/issues/693>
- 対応：　python.testing.pytestArgs に --no-cov を設定する

上記を試したけれど、全般的にデバッグができなくなったため、削除した。

## hypothesisでデバッグができない
givenデコレータなどに囲まれた関数のデバッグができない。
pytest-covを削除しても効果はなし。

一応、breakpoint()をコードに挿入するとデバッグできる。
ただし、自動リロードのプロセスがブレークしてしまい、コントロール不可になることがしばしば。
テスト関数内だけに使用を留めること。


# メモ
- pytest-xdistはプロセスをフォークするため、アンインストールした上で前述の問題を検証したが、本プラグインは特に問題ないようだ。